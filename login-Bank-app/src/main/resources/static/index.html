<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bank App</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .box { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 10px; width: 300px; }
        input, button { margin: 5px 0; padding: 8px; width: 95%; }
        button { cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; }
        button:hover { background: #0056b3; }
        #responseBox { margin-top: 20px; padding: 10px; border: 1px solid green; border-radius: 5px; min-height: 50px; }
    </style>
</head>
<body>

<h2>üè¶ Bank App</h2>

<!-- Signup -->
<div class="box">
    <h3>Signup</h3>
    <input type="text" id="signupName" placeholder="Name">
    <input type="text" id="signupMobile" placeholder="Mobile">
    <input type="password" id="signupPassword" placeholder="Password">
    <button onclick="signup()">Signup</button>
</div>

<!-- Login -->
<div class="box">
    <h3>Login</h3>
    <input type="text" id="loginMobile" placeholder="Mobile">
    <input type="password" id="loginPassword" placeholder="Password">
    <button onclick="login()">Login</button>
</div>

<!-- Balance -->
<div class="box">
    <h3>Check Balance</h3>
    <button onclick="balance()">Get Balance</button>
</div>

<!-- Deposit -->
<div class="box">
    <h3>Deposit</h3>
    <input type="number" id="depositAmount" placeholder="Enter amount">
    <button onclick="deposit()">Deposit</button>
</div>

<!-- Withdraw -->
<div class="box">
    <h3>Withdraw</h3>
    <input type="number" id="withdrawAmount" placeholder="Enter amount">
    <button onclick="withdraw()">Withdraw</button>
</div>

<!-- Response Box -->
<div id="responseBox">‚úÖ Response will appear here...</div>

<script>
    const BASE_URL = "https://spring-boot-app-fl4i.onrender.com/Bank";
    let token = "";

    function showResponse(data) {
      document.getElementById("responseBox").innerText = JSON.stringify(data, null, 2);
    }

    async function signup() {
      const name = document.getElementById("signupName").value;
      const mobile = document.getElementById("signupMobile").value;
      const password = document.getElementById("signupPassword").value;

      const res = await fetch(BASE_URL + "/signup", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, mobile, password })
      });
      showResponse(await res.json());
    }

    async function login() {
      const mobile = document.getElementById("loginMobile").value;
      const password = document.getElementById("loginPassword").value;

      const res = await fetch(BASE_URL + "/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ mobile, password })
      });
      token = await res.text();
      showResponse({ token });
    }

    async function balance() {
      const res = await fetch(BASE_URL + "/balance", {
        method: "GET",
        headers: { "Authorization": "Bearer " + token }
      });
      showResponse(await res.text());
    }

    async function deposit() {
      const amount = document.getElementById("depositAmount").value;
      const res = await fetch(BASE_URL + "/deposit/" + amount, {
        method: "PUT",
        headers: { "Authorization": "Bearer " + token }
      });
      showResponse(await res.text());
    }

    async function withdraw() {
      const amount = document.getElementById("withdrawAmount").value;
      const res = await fetch(BASE_URL + "/withdraw/" + amount, {
        method: "PUT",
        headers: { "Authorization": "Bearer " + token }
      });
      showResponse(await res.text());
    }
</script>
</body>
</html>
