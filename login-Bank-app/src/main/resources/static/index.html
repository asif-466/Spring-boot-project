<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Banking App</title>
    <script src="config.js"></script> <!-- yaha load hoga -->
    <style>
        /* ...tumhara existing CSS same rahega... */
    </style>
</head>
<body>
<div class="app">
    <!-- tumhara pura auth + dashboard ka HTML same -->
</div>

<script>
    // Ab baseUrl config.js se aa raha hai
    const baseUrl = BASE_URL;
    let token = localStorage.getItem("jwtToken");

    function showOutput(data) {
      document.getElementById("output").textContent =
        typeof data === "string" ? data : JSON.stringify(data, null, 2);
    }

    function toggleAuth(isLoggedIn) {
      document.getElementById("authPage").style.display = isLoggedIn ? "none" : "flex";
      document.getElementById("dashboard").style.display = isLoggedIn ? "flex" : "none";
    }

    function showPage(id, btn) {
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
    }

    function showSignup() {
      document.getElementById("loginCard").style.display = "none";
      document.getElementById("signupCard").style.display = "block";
    }

    function showLogin() {
      document.getElementById("signupCard").style.display = "none";
      document.getElementById("loginCard").style.display = "block";
    }

    async function signup() {
      const name = document.getElementById("signupName").value;
      const mobile = document.getElementById("signupMobile").value;
      const password = document.getElementById("signupPassword").value;
      const res = await fetch(`${baseUrl}/signup`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, mobile, password })
      });
      showOutput(await res.json());
    }

    async function login() {
      const mobile = document.getElementById("loginMobile").value;
      const password = document.getElementById("loginPassword").value;
      const res = await fetch(`${baseUrl}/login`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ mobile, password })
      });
      const data = await res.text();
      showOutput(data);
      if (data.includes("TOKEN:")) {
        token = data.split("TOKEN:")[1].trim();
        localStorage.setItem("jwtToken", token);
        toggleAuth(true);
      }
    }

    async function balance() {
      const res = await fetch(`${baseUrl}/balance`, {
        headers: { Authorization: "Bearer " + token }
      });
      showOutput(await res.text());
    }

    async function deposit() {
      const res = await fetch(`${baseUrl}/deposit/100`, {
        method: "PUT",
        headers: { Authorization: "Bearer " + token }
      });
      showOutput(await res.text());
    }

    async function withdraw() {
      const res = await fetch(`${baseUrl}/withdraw/50`, {
        method: "PUT",
        headers: { Authorization: "Bearer " + token }
      });
      showOutput(await res.text());
    }

    async function send() {
      const res = await fetch(`${baseUrl}/send/9999999999/20`, {
        method: "PUT",
        headers: { Authorization: "Bearer " + token }
      });
      showOutput(await res.text());
    }

    async function richUser() {
      const res = await fetch(`${baseUrl}/richUser`);
      showOutput(await res.json());
    }

    async function poorUser() {
      const res = await fetch(`${baseUrl}/poorUser`);
      showOutput(await res.json());
    }

    async function deleteAccount() {
      const res = await fetch(`${baseUrl}/delete`, {
        method: "DELETE",
        headers: { Authorization: "Bearer " + token }
      });
      showOutput(await res.text());
      localStorage.removeItem("jwtToken");
      token = null;
      toggleAuth(false);
    }

    function logout() {
      localStorage.removeItem("jwtToken");
      token = null;
      toggleAuth(false);
    }

    // init
    toggleAuth(!!token);
</script>
</body>
</html>
